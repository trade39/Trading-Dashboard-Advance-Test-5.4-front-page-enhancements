/* style.css */

/* --- Root Variables (Dark Theme - Default) --- */
:root {
    --primary-color: #5D78FF; 
    --secondary-color: #7B68EE; 
    
    --background-color: #1A1B26; 
    --card-background-color: #242535; 
    --section-background-color: #20212F; 
    --expander-header-bg: #2A2B3A; 
    --expander-content-bg: var(--card-background-color);
    
    --text-color: #E0E1E6; 
    --text-muted-color: #A0A2B3; 
    --text-heading-color: #F0F1F6; 
    
    --border-color: #3A3C4E; 
    --input-border-color: #4A4C5E; 
    --slider-track-color: #4A4C5E; /* For inactive part of slider track */
    
    --accent-color: #FF8C00; 
    --info-accent-color: #17A2B8; /* Using info color for instructions */
    
    --success-color: #28a745; 
    --warning-color: #ffc107; 
    --error-color: #dc3545; 
    --info-color: #17a2b8; 

    --font-family-sans-serif: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    --border-radius-sm: 0.25rem;
    --border-radius-md: 0.5rem; 
    --border-radius-lg: 0.75rem;

    --box-shadow-sm: 0 2px 4px rgba(0,0,0,0.15); 
    --box-shadow-md: 0 4px 8px rgba(0,0,0,0.2);
    --box-shadow-lg: 0 6px 12px rgba(0,0,0,0.25);
    --box-shadow-inset: inset 0 1px 2px rgba(0,0,0,0.1);

    --header-toolbar-background: var(--background-color);
    --header-toolbar-text-color: var(--text-muted-color);
    --header-toolbar-hover-text-color: var(--text-color);

    --sidebar-link-hover-bg: var(--primary-color);
    --sidebar-link-active-bg: var(--primary-color);
    --sidebar-link-text-color: var(--text-muted-color);
    --sidebar-link-hover-text-color: #FFFFFF;
    --sidebar-link-active-text-color: #FFFFFF;
    --sidebar-icon-color: var(--text-muted-color);
    --sidebar-icon-hover-color: #FFFFFF;
    --sidebar-icon-active-color: #FFFFFF;


    --transition-speed: 0.2s;
    --transition-timing: ease-in-out;
}

/* --- Light Theme Variables --- */
[data-theme="light"] {
    --primary-color: #0062E6; 
    --secondary-color: #5A6ACF; 
    
    --background-color: #F7F8FC; 
    --card-background-color: #FFFFFF;
    --section-background-color: #FFFFFF; 
    --expander-header-bg: #E9ECEF; 
    --expander-content-bg: var(--card-background-color);
    
    --text-color: #212529; 
    --text-muted-color: #6C757D; 
    --text-heading-color: #121416;

    --border-color: #DEE2E6; 
    --input-border-color: #CED4DA;
    --slider-track-color: #DEE2E6; /* For inactive part of slider track */


    --accent-color: #FF6B00; 
    --info-accent-color: #17A2B8; /* Consistent info color */


    --box-shadow-sm: 0 2px 4px rgba(0,0,0,0.05); 
    --box-shadow-md: 0 4px 8px rgba(0,0,0,0.07);
    --box-shadow-lg: 0 6px 12px rgba(0,0,0,0.1);
    --box-shadow-inset: inset 0 1px 2px rgba(0,0,0,0.05);

    --header-toolbar-background: var(--card-background-color);
    --header-toolbar-text-color: var(--text-muted-color);
    --header-toolbar-hover-text-color: var(--text-color);

    --sidebar-link-hover-bg: var(--primary-color);
    --sidebar-link-active-bg: var(--primary-color);
    --sidebar-link-text-color: var(--text-muted-color); 
    --sidebar-link-hover-text-color: #FFFFFF;
    --sidebar-link-active-text-color: #FFFFFF;
    --sidebar-icon-color: var(--text-muted-color);
    --sidebar-icon-hover-color: #FFFFFF;
    --sidebar-icon-active-color: #FFFFFF;
}


/* --- General Body and HTML Styles --- */
html {
    background-color: var(--background-color);
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family-sans-serif);
    color: var(--text-color);
    background-color: var(--background-color);
    margin: 0;
    padding: 0;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* --- Main Layout Container --- */
.main .block-container { /* Default Streamlit main content area */
    padding: 1rem 2rem; 
}

/* --- Headings --- */
h1, h2, h3, h4, h5, h6 {
    color: var(--text-heading-color);
    font-weight: 600;
    margin-top: 1.5em; 
    margin-bottom: 0.75em; 
    line-height: 1.3;
}

h1 { 
    font-size: 2.25rem; 
    margin-bottom: 0.5rem; 
    border-bottom: 2px solid var(--primary-color); 
    padding-bottom: 0.5rem;
    font-weight: 700;
}

h2.section-header { /* Custom class for major section titles */
    font-size: 1.75rem; 
    color: var(--primary-color);
    margin-top: 2.5rem; 
    margin-bottom: 1.5rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--border-color);
    font-weight: 600;
}

h3.section-subheader { /* Custom class for sub-section titles */
    font-size: 1.375rem; 
    color: var(--text-heading-color);
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-weight: 500;
}

/* Component specific subheader, e.g., in Column Mapper */
h3.component-subheader {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-heading-color);
    margin-top: 0.5rem; /* Reduced top margin for component context */
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}


.page-subtitle { /* For subtitles under main page titles */
    font-size: 1.1rem; 
    color: var(--text-muted-color);
    margin-top: -0.25rem; 
    margin-bottom: 2.5rem; 
    font-weight: 300; 
    max-width: 75ch; 
}

/* --- Streamlit Toolbar Styling --- */
div[data-testid="stToolbar"] {
    background-color: var(--header-toolbar-background) !important;
    border-bottom: 1px solid var(--border-color) !important;
    box-shadow: var(--box-shadow-sm);
    z-index: 999; 
}

div[data-testid="stToolbar"] button,
div[data-testid="stToolbar"] a,
div[data-testid="stToolbar"] label,
div[data-testid="stToolbar"] svg {
    color: var(--header-toolbar-text-color) !important;
    fill: var(--header-toolbar-text-color) !important;
    transition: color var(--transition-speed) var(--transition-timing), fill var(--transition-speed) var(--transition-timing);
}

div[data-testid="stToolbar"] button:hover,
div[data-testid="stToolbar"] a:hover,
div[data-testid="stToolbar"] label:hover,
div[data-testid="stToolbar"] svg:hover {
    color: var(--header-toolbar-hover-text-color) !important;
    fill: var(--header-toolbar-hover-text-color) !important;
    background-color: transparent !important;
}

/* --- Sidebar Styling --- */
div[data-testid="stSidebar"] {
    background-color: var(--section-background-color); 
    border-right: 1px solid var(--border-color);
    padding: 1rem; 
    box-shadow: var(--box-shadow-md);
}

div[data-testid="stSidebarNav"] > ul {
    padding: 0;
    margin: 0;
    list-style: none;
}

div[data-testid="stSidebarNav"] li > a {
    display: flex; 
    align-items: center; 
    padding: 0.75rem 1rem; 
    margin: 0.25rem 0; 
    border-radius: var(--border-radius-md);
    text-decoration: none;
    color: var(--sidebar-link-text-color);
    font-weight: 500; 
    font-size: 0.95rem;
    transition: background-color var(--transition-speed) var(--transition-timing), 
                color var(--transition-speed) var(--transition-timing),
                box-shadow var(--transition-speed) var(--transition-timing);
}

div[data-testid="stSidebarNav"] li > a > span:first-child, 
div[data-testid="stSidebarNav"] li > a > svg { 
    margin-right: 0.75rem; 
    font-size: 1.1em; 
    color: var(--sidebar-icon-color); 
    fill: var(--sidebar-icon-color);
    transition: color var(--transition-speed) var(--transition-timing), 
                fill var(--transition-speed) var(--transition-timing);
}

div[data-testid="stSidebarNav"] li > a:hover {
    background-color: var(--sidebar-link-hover-bg);
    color: var(--sidebar-link-hover-text-color) !important;
    box-shadow: var(--box-shadow-sm);
}
div[data-testid="stSidebarNav"] li > a:hover > span:first-child,
div[data-testid="stSidebarNav"] li > a:hover > svg {
    color: var(--sidebar-icon-hover-color);
    fill: var(--sidebar-icon-hover-color);
}

div[data-testid="stSidebarNav"] li > a[aria-current="page"] {
    background-color: var(--sidebar-link-active-bg);
    color: var(--sidebar-link-active-text-color) !important;
    font-weight: 600; 
    box-shadow: var(--box-shadow-md); 
}
div[data-testid="stSidebarNav"] li > a[aria-current="page"] > span:first-child,
div[data-testid="stSidebarNav"] li > a[aria-current="page"] > svg {
    color: var(--sidebar-icon-active-color);
    fill: var(--sidebar-icon-active-color);
}


div[data-testid="stSidebar"] .stButton button { 
    width: 100%;
    margin-top: 0.5rem;
}


/* --- General Button Styling for Streamlit --- */
div[data-testid="stButton"] > button,
button[data-testid="baseButton-secondary"] /* For st.download_button */ {
    background-color: var(--primary-color) !important;
    color: #FFFFFF !important; 
    border: 1px solid var(--primary-color) !important;
    padding: 0.6rem 1.25rem;
    border-radius: var(--border-radius-md);
    font-weight: 500; 
    font-size: 0.95rem;
    transition: background-color var(--transition-speed) var(--transition-timing), 
                border-color var(--transition-speed) var(--transition-timing),
                transform var(--transition-speed) var(--transition-timing),
                box-shadow var(--transition-speed) var(--transition-timing); /* Corrected var name */
    box-shadow: var(--box-shadow-sm);
    cursor: pointer;
}

/* Override for Streamlit's default red/danger buttons to use primary color */
div[data-testid="stButton"] > button[kind="secondaryFormSubmit"], /* Common for form submit */
div[data-testid="stButton"] > button[style*="background-color: #ff4b4b"],
div[data-testid="stButton"] > button[style*="background-color: rgb(255, 75, 75)"],
div[data-testid="stButton"] > button[style*="background-color: #ff4b4b !important"],
div[data-testid="stButton"] > button[style*="background-color: #ff5555"],
div[data-testid="stButton"] > button[style*="background-color: var(--error-color)"] {
    background-color: var(--primary-color) !important;
    border-color: var(--primary-color) !important;
    color: #fff !important;
}


/* Secondary button style (apply with a class if needed, e.g. st.button("...", class_name="secondary-button")) */
div[data-testid="stButton"] > button.secondary-button { 
    background-color: var(--accent-color) !important;
    border-color: var(--accent-color) !important;
}
div[data-testid="stButton"] > button.secondary-button:hover {
    background-color: color-mix(in srgb, var(--accent-color) 85%, black 15%) !important;
    border-color: color-mix(in srgb, var(--accent-color) 85%, black 15%) !important;
}

/* Hover and Active states for all primary-styled buttons */
div[data-testid="stButton"] > button:hover,
button[data-testid="baseButton-secondary"]:hover,
div[data-testid="stButton"] > button[kind="secondaryFormSubmit"]:hover,
div[data-testid="stButton"] > button[style*="background-color: rgb(255, 85, 85)"]:hover, /* if still targeting old danger styles */
div[data-testid="stButton"] > button[style*="background-color: #ff5555"]:hover,
div[data-testid="stButton"] > button[style*="background-color: red"]:hover,
div[data-testid="stButton"] > button[style*="background-color: var(--error-color)"]:hover {
    background-color: color-mix(in srgb, var(--primary-color) 85%, black 15%) !important;
    border-color: color-mix(in srgb, var(--primary-color) 85%, black 15%) !important;
    transform: translateY(-2px);
    box-shadow: var(--box-shadow-md);
}

div[data-testid="stButton"] > button:active,
button[data-testid="baseButton-secondary"]:active,
div[data-testid="stButton"] > button[kind="secondaryFormSubmit"]:active,
div[data-testid="stButton"] > button[style*="background-color: rgb(255, 85, 85)"]:active,
div[data-testid="stButton"] > button[style*="background-color: #ff5555"]:active,
div[data-testid="stButton"] > button[style*="background-color: red"]:active,
div[data-testid="stButton"] > button[style*="background-color: var(--error-color)"]:active {
    transform: translateY(0px);
    box-shadow: var(--box-shadow-sm);
    background-color: color-mix(in srgb, var(--primary-color) 70%, black 30%) !important;
    border-color: color-mix(in srgb, var(--primary-color) 70%, black 30%) !important;
}

/* --- Input Fields (Select, Text Input, etc.) --- */
div[data-testid="stTextInput"] input,
div[data-testid="stNumberInput"] input,
div[data-testid="stTextArea"] textarea,
div[data-testid="stDateInput"] input, /* Streamlit uses stDateInput for the input field itself */
div[data-testid="stDateInput"] div[data-baseweb="input"] input, /* More specific target for date input if needed */
div[data-testid="stTimeInput"] input /* Streamlit uses stTimeInput for the input field itself */ {
    background-color: var(--card-background-color) !important;
    color: var(--text-color) !important;
    border: 1px solid var(--input-border-color) !important;
    border-radius: var(--border-radius-md) !important;
    box-shadow: var(--box-shadow-inset) !important;
    padding: 0.5rem 0.75rem !important;
    transition: border-color var(--transition-speed) var(--transition-timing), box-shadow var(--transition-speed) var(--transition-timing);
}

div[data-testid="stSelectbox"] div[data-baseweb="select"] > div:first-child {
    background-color: var(--card-background-color) !important;
    border: 1px solid var(--input-border-color) !important;
    border-radius: var(--border-radius-md) !important;
    box-shadow: var(--box-shadow-inset) !important;
    padding: 0.25rem 0.75rem !important; /* Adjusted padding for select box for alignment */
    line-height: 1.5; /* Ensure text is vertically centered */
    min-height: calc(1.5em + 1rem + 2px); /* Match text input height: line-height + padding + border */
    display: flex;
    align-items: center;
    transition: border-color var(--transition-speed) var(--transition-timing), box-shadow var(--transition-speed) var(--transition-timing);
}

div[data-testid="stSelectbox"] div[data-baseweb="select"] > div:first-child > div, /* Text content */
div[data-testid="stSelectbox"] div[data-baseweb="select"] > div:first-child input { /* Input field inside select */
    color: var(--text-color) !important;
    background-color: transparent !important; 
    opacity: 1 !important; 
    padding: 0 !important; 
    margin: 0 !important; 
    line-height: inherit !important; 
    font-family: var(--font-family-sans-serif) !important; /* Ensure font consistency */
    font-size: 1rem !important; /* Ensure font size consistency */
}

div[data-testid="stSelectbox"] div[data-baseweb="select"] svg { /* Dropdown arrow */
    fill: var(--text-muted-color) !important; 
    transition: fill var(--transition-speed) var(--transition-timing);
}
div[data-testid="stSelectbox"] div[data-baseweb="select"]:hover svg {
    fill: var(--text-color) !important; 
}


div[data-testid="stTextInput"] input:focus,
div[data-testid="stNumberInput"] input:focus,
div[data-testid="stTextArea"] textarea:focus,
div[data-testid="stDateInput"] input:focus,
div[data-testid="stDateInput"] div[data-baseweb="input"] input:focus,
div[data-testid="stTimeInput"] input:focus,
div[data-testid="stSelectbox"] div[data-baseweb="select"] > div:first-child:focus-within { 
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--primary-color) 25%, transparent 75%), var(--box-shadow-inset) !important;
}

::placeholder { color: var(--text-muted-color); opacity: 1; }
:-ms-input-placeholder { color: var(--text-muted-color); }
::-ms-input-placeholder { color: var(--text-muted-color); }

/* Dropdown Menu Styling (for st.selectbox, st.multiselect) */
div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"],
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] {
    background-color: var(--card-background-color) !important;
    border-radius: var(--border-radius-md) !important;
    border: 1px solid var(--border-color) !important;
    box-shadow: var(--box-shadow-lg) !important; 
    margin-top: 4px !important;
    padding: 0.25rem 0 !important; 
}

div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] ul,
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] ul {
    padding: 0 !important; 
}

div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] li div[role="option"],
div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] li,
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] li div[role="option"],
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] li {
    background-color: transparent !important;
    color: var(--text-color) !important;
    padding: 0.6rem 1rem !important;
    font-size: 0.9rem;
    border-radius: var(--border-radius-sm); 
    margin: 0.125rem 0.25rem; 
    transition: background-color var(--transition-speed) var(--transition-timing), color var(--transition-speed) var(--transition-timing);
}

div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] li div[role="option"][aria-selected="true"],
div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] li[aria-selected="true"],
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] li div[role="option"][aria-selected="true"],
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] li[aria-selected="true"] {
    background-color: color-mix(in srgb, var(--primary-color) 20%, transparent 80%) !important;
    color: var(--primary-color) !important;
    font-weight: 500;
}

div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] li div[role="option"]:hover,
div[data-baseweb="popover"][id^="baseweb-select-"] div[data-baseweb="menu"] li:hover,
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] li div[role="option"]:hover,
div[data-baseweb="popover"][id^="baseweb-multiselect-"] div[data-baseweb="menu"] li:hover {
    background-color: var(--primary-color) !important;
    color: #FFFFFF !important;
}

/* --- Slider Styling (st.slider) --- */
div[data-testid="stSlider"] {
    padding: 0.5rem 0.25rem; 
}
div[data-testid="stSlider"] div[data-baseweb="slider"] > div:nth-child(1) { /* Track background */
    background-color: var(--slider-track-color) !important;
    height: 6px !important; 
    border-radius: var(--border-radius-sm);
}
div[data-testid="stSlider"] div[data-baseweb="slider"] > div:nth-child(2) > div { /* Filled part of track */
    background-color: var(--primary-color) !important;
    height: 6px !important; 
    border-radius: var(--border-radius-sm);
}
div[data-testid="stSlider"] div[role="slider"] { /* Thumb handle */
    background-color: var(--primary-color) !important;
    border: 2px solid var(--card-background-color) !important; 
    box-shadow: var(--box-shadow-md) !important;
    width: 18px !important; 
    height: 18px !important; 
    border-radius: 50% !important; 
    cursor: pointer;
    transition: transform var(--transition-speed) var(--transition-timing), box-shadow var(--transition-speed) var(--transition-timing);
}
div[data-testid="stSlider"] div[role="slider"]:hover {
    transform: scale(1.1);
    box-shadow: 0 0 0 6px color-mix(in srgb, var(--primary-color) 20%, transparent) !important; 
}
div[data-testid="stSlider"] div[role="slider"]:focus-visible { 
    box-shadow: 0 0 0 6px color-mix(in srgb, var(--primary-color) 30%, transparent) !important;
    outline: none;
}


/* --- Expander Styling --- */
/* Styling for category headers (h6) used before expanders in column mapper */
.column-mapper-container h6 {
    font-size: 1.05rem; /* Slightly larger than default text */
    font-weight: 600; /* Bolder */
    color: var(--text-heading-color);
    margin-top: 1.25rem; /* Space above category header */
    margin-bottom: 0.5rem; /* Space below category header, before expander */
    padding-bottom: 0.25rem;
    border-bottom: 1px solid var(--input-border-color); /* Subtle separator */
}
.column-mapper-container h6 .critical-marker { /* For the asterisk on critical categories */
    color: var(--error-color);
    font-weight: bold;
    margin-left: 0.25rem;
}


div[data-testid="stExpander"] summary {
    font-size: 1rem; /* Adjusted for a cleaner look with h6 above */
    font-weight: 500;
    color: var(--text-heading-color);
    background-color: var(--expander-header-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    padding: 0.75rem 1rem; /* Slightly reduced padding */
    transition: background-color var(--transition-speed) var(--transition-timing);
    /* margin-bottom: -1px; Removed as h6 provides separation */
}
div[data-testid="stExpander"] summary:hover {
    background-color: color-mix(in srgb, var(--expander-header-bg) 90%, var(--text-color) 5%);
}
div[data-testid="stExpander"][open] summary { 
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}
div[data-testid="stExpander"] [data-testid="stExpanderDetails"] {
    padding: 1.25rem; /* Consistent padding */
    background-color: var(--expander-content-bg);
    border: 1px solid var(--border-color);
    border-top: none; 
    border-radius: 0 0 var(--border-radius-md) var(--border-radius-md); 
}

/* --- Card Styling (Generic Custom Card) --- */
.custom-card { 
    background-color: var(--card-background-color);
    padding: 1.5rem;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    box-shadow: var(--box-shadow-md);
    margin-bottom: 1.5rem;
}

/* --- AI & ML Page Specific Styles (Example) --- */
.ai-ml-task-container { 
    background-color: var(--card-background-color);
    padding: 2rem; 
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    box-shadow: var(--box-shadow-md);
    margin-bottom: 2.5rem;
}
.ai-ml-task-container.placeholder-section {
    border-left: 4px solid var(--secondary-color); 
    background-color: color-mix(in srgb, var(--card-background-color) 95%, var(--secondary-color) 5%); 
}
.ai-ml-task-container div[data-testid="stExpander"] summary { 
    font-size: 1.15rem; 
    padding: 1rem 1.5rem;
}
.ai-ml-task-container div[data-testid="stForm"] .stCaption { /* Caption inside a form in this container */
    font-size: 0.9rem;
    color: var(--text-muted-color);
    margin-top: -0.25rem; 
    margin-bottom: 1rem; 
}
.ai-ml-task-container div[data-testid="stForm"] h6 {
    font-size: 1rem;
    color: var(--text-heading-color);
    margin-top: 1.25rem;
    margin-bottom: 0.75rem;
    font-weight: 500;
}
.ai-ml-task-container div[data-testid="stCodeBlock"] {
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    background-color: var(--background-color); 
    margin-top: 1rem;
}
.ai-ml-task-container div[data-testid="stCodeBlock"] pre {
    padding: 1rem;
    font-size: 0.875rem; 
}

/* --- Welcome Page Styles (Example) --- */
.welcome-container {
    background-color: transparent; 
    border: none;
    box-shadow: none;
    max-width: 100%; 
    padding: 0.5rem 2rem 2rem 2rem; 
    margin: 0 auto; 
}
.hero-section { padding-top: 0; }
.welcome-title { 
    font-size: 2.5rem; 
    font-weight: 700;
    margin-top: 0.75rem; 
    margin-bottom: 0.25rem; 
    color: var(--primary-color);
    text-align: center;
    border-bottom: none; 
}
.welcome-subtitle { 
    font-size: 0.9rem; 
    font-weight: 400;
    color: var(--text-muted-color);
    text-align: center;
    margin-top: 0; 
    margin-bottom: 1.5rem; 
}
.hero-section .tagline { 
    font-size: 1.25rem; 
    font-weight: 300;
    margin-bottom: 2rem;
    color: var(--text-muted-color);
    text-align: center;
    max-width: 60ch;
    margin-left: auto;
    margin-right: auto;
}
.feature-item { 
    padding: 1rem 0.5rem; 
    text-align: center; 
}
.feature-item h4 {
    color: var(--primary-color);
    margin-top: 0;
    margin-bottom: 0.75rem; 
    font-size: 1.2rem; 
    font-weight: 600;
}
.feature-item p {
    font-size: 0.95rem;
    line-height: 1.6;
    color: var(--text-color);
    max-width: 30ch; 
    margin-left: auto;
    margin-right: auto;
}


/* --- Custom Scrollbar --- */
::-webkit-scrollbar { width: 12px; height: 12px; }
::-webkit-scrollbar-track { background: var(--background-color); border-radius: var(--border-radius-sm); }
::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius: var(--border-radius-md); border: 3px solid var(--background-color); }
::-webkit-scrollbar-thumb:hover { background-color: var(--secondary-color); }


/* --- Responsive Design Adjustments --- */
@media (max-width: 992px) { /* Tablet */
    .main .block-container { padding: 1rem 1.5rem; } 
    h1 { font-size: 2rem; }
    h2.section-header { font-size: 1.6rem; }
    .page-subtitle { font-size: 1rem; }
    .welcome-container { padding: 0.5rem 1.5rem 1.5rem 1.5rem; margin: 0 auto; } 
    .welcome-title { font-size: 2.25rem; margin-top: 0.5rem; } 
    .welcome-subtitle { font-size: 0.85rem; margin-bottom: 1.25rem; } 
    .hero-section .tagline { font-size: 1.15rem; }
}

@media (max-width: 767px) { /* Mobile */
    .main .block-container { padding: 0.5rem 1rem; } 
    h1 { font-size: 1.75rem; margin-bottom: 0.75rem; }
    h2.section-header { font-size: 1.4rem; margin-bottom: 1rem; }
    h3.section-subheader { font-size: 1.2rem; }
    .page-subtitle { font-size: 0.9rem; margin-bottom: 1.5rem; }
    
    .ai-ml-task-container { padding: 1.25rem; }
    .ai-ml-task-container div[data-testid="stExpander"] summary { font-size: 1rem; padding: 0.75rem 1rem;}
    .ai-ml-task-container div[data-testid="stExpander"] [data-testid="stExpanderDetails"] { padding: 1rem; }

    .welcome-container { padding: 0.5rem 1rem 1rem 1rem; margin: 0 auto; } 
    .welcome-title { font-size: 2rem; margin-top: 0.25rem; } 
    .welcome-subtitle { font-size: 0.8rem; margin-bottom: 1rem; } 
    .hero-section .tagline { font-size: 1.05rem; }
    .feature-item { margin-bottom: 1.5rem; }
    .feature-item:last-child { margin-bottom: 0; }
    .feature-item h4 { font-size: 1.15rem; }
}

/* --- KPI Card Styling --- */
.kpi-card {
    background-color: var(--card-background-color);
    padding: 1.25rem;
    border-radius: var(--border-radius-md);
    box-shadow: var(--box-shadow-sm);
    border-left: 4px solid var(--primary-color);
    margin-bottom: 1rem;
}
.kpi-card .kpi-title {
    font-size: 0.9rem;
    color: var(--text-muted-color);
    margin-bottom: 0.25rem;
}
.kpi-card .kpi-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-heading-color);
}
.kpi-card .kpi-delta.positive { color: var(--success-color); }
.kpi-card .kpi-delta.negative { color: var(--error-color); }

/* --- Custom Message Box Styling (Info, Success, Warning, Error) --- */
.custom-message-box {
    padding: 1rem 1.25rem;
    margin-bottom: 1.5rem;
    border-radius: var(--border-radius-md);
    border-width: 1px;
    border-style: solid;
    display: flex;
    align-items: center;
    font-size: 0.95rem;
    box-shadow: var(--box-shadow-sm);
}
.custom-message-box-icon { margin-right: 0.75rem; font-size: 1.25rem; }
.custom-message-box.success { background-color: color-mix(in srgb, var(--success-color) 15%, transparent); border-color: var(--success-color); color: var(--success-color); }
.custom-message-box.warning { background-color: color-mix(in srgb, var(--warning-color) 15%, transparent); border-color: var(--warning-color); color: color-mix(in srgb, var(--warning-color) 80%, black); }
[data-theme="light"] .custom-message-box.warning { color: color-mix(in srgb, var(--warning-color) 90%, black); } /* Ensure contrast in light mode */
.custom-message-box.error   { background-color: color-mix(in srgb, var(--error-color) 15%, transparent); border-color: var(--error-color); color: var(--error-color); }
.custom-message-box.info    { background-color: color-mix(in srgb, var(--info-color) 15%, transparent); border-color: var(--info-color); color: var(--info-color); }


/* --- Column Mapper Specific Styles --- */

/* NEW/UPDATED: Styling for the instructions box */
.column-mapper-container .mapper-instructions {
    font-size: 0.95rem; /* Slightly increased font size for readability */
    color: var(--text-color); /* Main text color for better readability than muted */
    background-color: color-mix(in srgb, var(--info-accent-color) 10%, var(--section-background-color) 90%); /* Subtle info background */
    padding: 1rem 1.25rem; /* Increased padding for more breathing room */
    border-radius: var(--border-radius-md);
    border-left: 4px solid var(--info-accent-color); /* Prominent left border with info color */
    margin-top: 1.5rem; /* More space above */
    margin-bottom: 2rem; /* More space below, before the form starts */
    line-height: 1.6; /* Improved line spacing */
    box-shadow: var(--box-shadow-sm);
    display: flex; /* For aligning icon and text */
    align-items: flex-start; /* Align items to the top */
}

.column-mapper-container .mapper-instructions .instruction-icon {
    font-size: 1.2rem; /* Icon size */
    margin-right: 0.75rem; /* Space between icon and text */
    color: var(--info-accent-color); /* Icon color matches border */
    line-height: 1.6; /* Match text line-height for vertical alignment */
}

.column-mapper-container .mapper-instructions strong { /* For the asterisk emphasis */
    color: var(--error-color);
    font-weight: bold;
}


.column-mapper-container .type-mismatch-warning {
    color: var(--warning-color) !important; 
    font-size: 0.8rem;
    display: block; 
    margin-top: 0.25rem;
}
.column-mapper-container hr.styled-hr {
    border: none;
    border-top: 1px solid var(--border-color);
    margin: 1.5rem 0;
}

/* Column Mapper Data Preview Section */
.data-preview-container {
    background-color: var(--section-background-color); 
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-lg); 
    padding: 1.25rem; 
    margin-top: 1rem; 
    margin-bottom: 1.5rem; 
    box-shadow: var(--box-shadow-sm); 
}

.data-preview-container .data-preview-title { 
    font-size: 1.1rem; 
    font-weight: 600; 
    color: var(--text-heading-color);
    margin-top: 0; 
    margin-bottom: 1rem; 
    padding-bottom: 0.65rem; 
    border-bottom: 1px solid var(--input-border-color); 
    line-height: 1.4; 
}

.data-preview-container div[data-testid="stDataFrame"] {
    margin-top: 0.25rem; 
}

.data-preview-container .data-preview-placeholder {
    font-size: 0.95rem; 
    color: var(--text-muted-color);
    padding: 1.5rem 1rem; 
    text-align: center;
    border: 1px dashed var(--input-border-color); 
    border-radius: var(--border-radius-md); 
    background-color: color-mix(in srgb, var(--section-background-color) 70%, var(--background-color) 30%); 
    margin-top: 0.5rem; 
}

/* Custom label styling for selectboxes to allow HTML (e.g., red asterisk) */
.column-mapper-container div[data-testid="stSelectbox"] > label, /* General label */
.column-mapper-container label[for*="map_"] { /* Specific for our markdown labels */
    font-size: 1rem; /* Or your desired font size for labels */
    color: var(--text-color);
    display: block;
    margin-bottom: 0.25rem; /* Space between label and selectbox */
    padding-left: 0; /* Remove default Streamlit label padding if any */
}
